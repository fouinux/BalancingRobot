/*
 * L3G4200D.h
 *
 *  Created on: 27 mars 2018
 *      Author: fouinux@gmail.com
 */

#ifndef DRIVERS_L3G4200D_H_
#define DRIVERS_L3G4200D_H_

/* L3G4200D general definition */
#define L3G4200D_I2C_ADDR							0xD0

#define L3G4200D_I2C_AUTOINCREMENT_MASK				0x80

/* L3G4200D register definition */
#define L3G4200D_REG_ADDR_WHO_AM_I					0x0F
	#define L3G4200D_WHO_AM_I								0xD3

#define L3G4200D_REG_ADDR_CTRL_REG1					0x20
	#define L3G4200D_CTRL_REG1_BN_DR						6
	#define L3G4200D_CTRL_REG1_BM_DR						(0x03 << L3G4200D_CTRL_REG1_BN_DR)
		#define L3G4200D_CTRL_REG1_BM_DR_100HZ					(0x00 << L3G4200D_CTRL_REG1_BN_DR)
		#define L3G4200D_CTRL_REG1_BM_DR_200HZ					(0x01 << L3G4200D_CTRL_REG1_BN_DR)
		#define L3G4200D_CTRL_REG1_BM_DR_400HZ					(0x02 << L3G4200D_CTRL_REG1_BN_DR)
		#define L3G4200D_CTRL_REG1_BM_DR_800HZ					(0x03 << L3G4200D_CTRL_REG1_BN_DR)
	#define L3G4200D_CTRL_REG1_BN_BW						4
	#define L3G4200D_CTRL_REG1_BM_BW						(0x03 << L3G4200D_CTRL_REG1_BN_BW)
	#define L3G4200D_CTRL_REG1_BN_PD						3
	#define L3G4200D_CTRL_REG1_BM_PD						(0x01 << L3G4200D_CTRL_REG1_BN_PD)
	#define L3G4200D_CTRL_REG1_BN_Z_EN						2
	#define L3G4200D_CTRL_REG1_BM_Z_EN						(0x01 << L3G4200D_CTRL_REG1_BN_Z_EN)
	#define L3G4200D_CTRL_REG1_BN_Y_EN						1
	#define L3G4200D_CTRL_REG1_BM_Y_EN						(0x01 << L3G4200D_CTRL_REG1_BN_Y_EN)
	#define L3G4200D_CTRL_REG1_BN_X_EN						0
	#define L3G4200D_CTRL_REG1_BM_X_EN						(0x01 << L3G4200D_CTRL_REG1_BN_X_EN)

#define L3G4200D_REG_ADDR_CTRL_REG2					0x21
	#define L3G4200D_CTRL_REG2_BN_HPM						4
	#define L3G4200D_CTRL_REG2_BM_HPM						(0x03 << L3G4200D_CTRL_REG2_BN_HPM)
	#define L3G4200D_CTRL_REG2_BN_HPCF						0
	#define L3G4200D_CTRL_REG2_BM_HPCF						(0x0F << L3G4200D_CTRL_REG2_BN_HPCF)

#define L3G4200D_REG_ADDR_CTRL_REG3					0x22
	#define L3G4200D_CTRL_REG3_BN_I1_INT1					7
	#define L3G4200D_CTRL_REG3_BM_I1_INT1					(0x01 << L3G4200D_CTRL_REG3_BN_I1_INT1)
	#define L3G4200D_CTRL_REG3_BN_I1_BOOT					6
	#define L3G4200D_CTRL_REG3_BM_I1_BOOT					(0x01 << L3G4200D_CTRL_REG3_BN_I1_BOOT)
	#define L3G4200D_CTRL_REG3_BN_H_LACTIVE					5
	#define L3G4200D_CTRL_REG3_BM_H_LACTIVE					(0x01 << L3G4200D_CTRL_REG3_BN_H_LACTIVE)
	#define L3G4200D_CTRL_REG3_BN_PP_OD						4
	#define L3G4200D_CTRL_REG3_BM_PP_OD						(0x01 << L3G4200D_CTRL_REG3_BN_PP_OD)
	#define L3G4200D_CTRL_REG3_BN_I2_DRDY					3
	#define L3G4200D_CTRL_REG3_BM_I2_DRDY					(0x01 << L3G4200D_CTRL_REG3_BN_I2_DRDY)
	#define L3G4200D_CTRL_REG3_BN_I2_WTM					2
	#define L3G4200D_CTRL_REG3_BM_I2_WTM					(0x01 << L3G4200D_CTRL_REG3_BN_I2_WTM)
	#define L3G4200D_CTRL_REG3_BN_I2_ORUN					1
	#define L3G4200D_CTRL_REG3_BM_I2_ORUN					(0x01 << L3G4200D_CTRL_REG3_BN_I2_ORUN)
	#define L3G4200D_CTRL_REG3_BN_I2_EMPTY					0
	#define L3G4200D_CTRL_REG3_BM_I2_EMPTY					(0x01 << L3G4200D_CTRL_REG3_BN_I2_EMPTY)

#define L3G4200D_REG_ADDR_CTRL_REG4					0x23
	#define L3G4200D_CTRL_REG4_BN_BDU						7
	#define L3G4200D_CTRL_REG4_BM_BDU						(0x01 << L3G4200D_CTRL_REG4_BN_BDU)
		#define L3G4200D_CTRL_REG4_BM_BDU_OFF					(0x00 << L3G4200D_CTRL_REG4_BN_BDU)
		#define L3G4200D_CTRL_REG4_BM_BDU_ON					(0x01 << L3G4200D_CTRL_REG4_BN_BDU)
	#define L3G4200D_CTRL_REG4_BN_BLE						6
	#define L3G4200D_CTRL_REG4_BM_BLE						(0x01 << L3G4200D_CTRL_REG4_BN_BLE)
		#define L3G4200D_CTRL_REG4_BM_BLE_LITTLE				(0x00 << L3G4200D_CTRL_REG4_BN_BLE)			///< Little Endian
		#define L3G4200D_CTRL_REG4_BM_BLE_BIG					(0x01 << L3G4200D_CTRL_REG4_BN_BLE)			///< Big Endian
	#define L3G4200D_CTRL_REG4_BN_FS						4
	#define L3G4200D_CTRL_REG4_BM_FS						(0x03 << L3G4200D_CTRL_REG4_BN_FS)
		#define L3G4200D_CTRL_REG4_BM_FS_250DPS					(0x00 << L3G4200D_CTRL_REG4_BN_FS)			///< 250 DPS
		#define L3G4200D_CTRL_REG4_BM_FS_500DPS					(0x01 << L3G4200D_CTRL_REG4_BN_FS)			///< 500 DPS
		#define L3G4200D_CTRL_REG4_BM_FS_2000DPS				(0x02 << L3G4200D_CTRL_REG4_BN_FS)			///< 2000 DPS
	#define L3G4200D_CTRL_REG4_BN_ST						1
	#define L3G4200D_CTRL_REG4_BM_ST						(0x03 << L3G4200D_CTRL_REG4_BN_ST)
	#define L3G4200D_CTRL_REG4_BN_SIM						0
	#define L3G4200D_CTRL_REG4_BM_SIM						(0x01 << L3G4200D_CTRL_REG4_BN_SIM)

#define L3G4200D_REG_ADDR_CTRL_REG5					0x24
	#define L3G4200D_CTRL_REG5_BN_BOOT						7
	#define L3G4200D_CTRL_REG5_BM_BOOT						(0x01 << L3G4200D_CTRL_REG5_BN_BOOT)
	#define L3G4200D_CTRL_REG5_BN_FIFO_EN					6
	#define L3G4200D_CTRL_REG5_BM_FIFO_EN					(0x01 << L3G4200D_CTRL_REG5_BN_FIFO_EN)
		#define L3G4200D_CTRL_REG5_BM_FIFO_EN_DIS				(0x00 << L3G4200D_CTRL_REG5_BN_FIFO_EN)		///< FIFO Disabled
		#define L3G4200D_CTRL_REG5_BM_FIFO_EN_EN				(0x01 << L3G4200D_CTRL_REG5_BN_FIFO_EN)		///< FIFO Enabled
	#define L3G4200D_CTRL_REG5_BN_H_PEN						4
	#define L3G4200D_CTRL_REG5_BM_H_PEN						(0x01 << L3G4200D_CTRL_REG5_BN_H_PEN)
	#define L3G4200D_CTRL_REG5_BN_INT1_SEL					2
	#define L3G4200D_CTRL_REG5_BM_INT1_SEL					(0x03 << L3G4200D_CTRL_REG5_BN_INT1_SEL)
	#define L3G4200D_CTRL_REG5_BN_OUT1_SEL					0
	#define L3G4200D_CTRL_REG5_BM_OUT1_SEL					(0x03 << L3G4200D_CTRL_REG5_BN_OUT1_SEL)

#define L3G4200D_REG_ADDR_REFERENCE					0x25
	#define L3G4200D_REFERENCE_BN_REF						0
	#define L3G4200D_REFERENCE_BM_REF						(0xFF << L3G4200D_REFERENCE_BN_REF)

#define L3G4200D_REG_ADDR_OUT_TEMP					0x26
	#define L3G4200D_OUT_TEMP_BN_REF						0
	#define L3G4200D_OUT_TEMP_BM_REF						(0xFF << L3G4200D_OUT_TEMP_BN_REF)

#define L3G4200D_REG_ADDR_STATUS_REG				0x27
	#define L3G4200D_STATUS_REG_BN_ZYXOR					7
	#define L3G4200D_STATUS_REG_BM_ZYXOR					(0x01 << L3G4200D_STATUS_REG_BN_ZYXOR)
	#define L3G4200D_STATUS_REG_BN_ZOR						6
	#define L3G4200D_STATUS_REG_BM_ZOR						(0x01 << L3G4200D_STATUS_REG_BN_ZOR)
	#define L3G4200D_STATUS_REG_BN_YOR						5
	#define L3G4200D_STATUS_REG_BM_YOR						(0x01 << L3G4200D_STATUS_REG_BN_YOR)
	#define L3G4200D_STATUS_REG_BN_XOR						4
	#define L3G4200D_STATUS_REG_BM_XOR						(0x01 << L3G4200D_STATUS_REG_BN_XOR)
	#define L3G4200D_STATUS_REG_BN_ZYXDA					3
	#define L3G4200D_STATUS_REG_BM_ZYXDA					(0x01 << L3G4200D_STATUS_REG_BN_ZYXDA)
	#define L3G4200D_STATUS_REG_BN_ZDA						2
	#define L3G4200D_STATUS_REG_BM_ZDA						(0x01 << L3G4200D_STATUS_REG_BN_ZDA)
	#define L3G4200D_STATUS_REG_BN_YDA						1
	#define L3G4200D_STATUS_REG_BM_YDA						(0x01 << L3G4200D_STATUS_REG_BN_YDA)
	#define L3G4200D_STATUS_REG_BN_XDA						0
	#define L3G4200D_STATUS_REG_BM_XDA						(0x01 << L3G4200D_STATUS_REG_BN_XDA)

#define L3G4200D_REG_ADDR_OUT_X_L					0x28
#define L3G4200D_REG_ADDR_OUT_X_H					0x29
#define L3G4200D_REG_ADDR_OUT_Y_L					0x2A
#define L3G4200D_REG_ADDR_OUT_Y_H					0x2B
#define L3G4200D_REG_ADDR_OUT_Z_L					0x2C
#define L3G4200D_REG_ADDR_OUT_Z_H					0x2D
	#define L3G4200D_OUT_X_L_BN_VALUE						0
	#define L3G4200D_OUT_X_L_BM_VALUE						(0xFF << L3G4200D_OUT_X_L_BN_VALUE)
	#define L3G4200D_OUT_X_H_BN_VALUE						0
	#define L3G4200D_OUT_X_H_BM_VALUE						(0xFF << L3G4200D_OUT_X_H_BN_VALUE)

#define L3G4200D_REG_ADDR_FIFO_CTRL_REG				0x2E
	#define L3G4200D_FIFO_CTRL_REG_BN_FM					5
	#define L3G4200D_FIFO_CTRL_REG_BM_FM					(0x07 << L3G4200D_FIFO_CTRL_REG_BN_FM)
	#define L3G4200D_FIFO_CTRL_REG_BN_WTM					0
	#define L3G4200D_FIFO_CTRL_REG_BM_WTM					(0x1F << L3G4200D_FIFO_CTRL_REG_BN_WTM)

#define L3G4200D_REG_ADDR_FIFO_SRC_REG				0x2F
	#define L3G4200D_FIFO_SRC_REG_BN_WTM					7
	#define L3G4200D_FIFO_SRC_REG_BM_WTM					(0x01 << L3G4200D_FIFO_SRC_REG_BN_WTM)
	#define L3G4200D_FIFO_SRC_REG_BN_OVRN					6
	#define L3G4200D_FIFO_SRC_REG_BM_OVRN					(0x01 << L3G4200D_FIFO_SRC_REG_BN_OVRN)
	#define L3G4200D_FIFO_SRC_REG_BN_EMPTY					5
	#define L3G4200D_FIFO_SRC_REG_BM_EMPTY					(0x01 << L3G4200D_FIFO_SRC_REG_BN_EMPTY)
	#define L3G4200D_FIFO_SRC_REG_BN_FSS					0
	#define L3G4200D_FIFO_SRC_REG_BM_FSS					(0x1F << L3G4200D_FIFO_SRC_REG_BN_FSS)

#define L3G4200D_REG_ADDR_INT1_CFG					0x30
	#define L3G4200D_INT1_CFG_BN_AND_OR						7
	#define L3G4200D_INT1_CFG_BM_AND_OR						(0x01 << L3G4200D_INT1_CFG_BN_AND_OR)
	#define L3G4200D_INT1_CFG_BN_LIR						6
	#define L3G4200D_INT1_CFG_BM_LIR						(0x01 << L3G4200D_INT1_CFG_BN_LIR)
	#define L3G4200D_INT1_CFG_BN_ZHIE						5
	#define L3G4200D_INT1_CFG_BM_ZHIE						(0x01 << L3G4200D_INT1_CFG_BN_ZHIE)
	#define L3G4200D_INT1_CFG_BN_ZLIE						4
	#define L3G4200D_INT1_CFG_BM_ZLIE						(0x01 << L3G4200D_INT1_CFG_BN_ZLIE)
	#define L3G4200D_INT1_CFG_BN_YHIE						3
	#define L3G4200D_INT1_CFG_BM_YHIE						(0x01 << L3G4200D_INT1_CFG_BN_YHIE)
	#define L3G4200D_INT1_CFG_BN_YLIE						2
	#define L3G4200D_INT1_CFG_BM_YLIE						(0x01 << L3G4200D_INT1_CFG_BN_YLIE)
	#define L3G4200D_INT1_CFG_BN_XHIE						1
	#define L3G4200D_INT1_CFG_BM_XHIE						(0x01 << L3G4200D_INT1_CFG_BN_XHIE)
	#define L3G4200D_INT1_CFG_BN_XLIE						0
	#define L3G4200D_INT1_CFG_BM_XLIE						(0x01 << L3G4200D_INT1_CFG_BN_XLIE)

#define L3G4200D_REG_ADDR_INT1_SRC					0x31
	#define L3G4200D_INT1_SRC_BN_IA							6
	#define L3G4200D_INT1_SRC_BM_IA							(0x01 << L3G4200D_INT1_SRC_BN_IA)
	#define L3G4200D_INT1_SRC_BN_ZH							5
	#define L3G4200D_INT1_SRC_BM_ZH							(0x01 << L3G4200D_INT1_SRC_BN_ZH)
	#define L3G4200D_INT1_SRC_BN_ZL							4
	#define L3G4200D_INT1_SRC_BM_ZL							(0x01 << L3G4200D_INT1_SRC_BN_ZL)
	#define L3G4200D_INT1_SRC_BN_YH							3
	#define L3G4200D_INT1_SRC_BM_YH							(0x01 << L3G4200D_INT1_SRC_BN_YH)
	#define L3G4200D_INT1_SRC_BN_YL							2
	#define L3G4200D_INT1_SRC_BM_YL							(0x01 << L3G4200D_INT1_SRC_BN_YL)
	#define L3G4200D_INT1_SRC_BN_XH							1
	#define L3G4200D_INT1_SRC_BM_XH							(0x01 << L3G4200D_INT1_SRC_BN_XH)
	#define L3G4200D_INT1_SRC_BN_XL							0
	#define L3G4200D_INT1_SRC_BM_XL							(0x01 << L3G4200D_INT1_SRC_BN_XL)

#define L3G4200D_REG_ADDR_INT1_TSH_XH				0x32
#define L3G4200D_REG_ADDR_INT1_TSH_XL				0x33
#define L3G4200D_REG_ADDR_INT1_TSH_YH				0x34
#define L3G4200D_REG_ADDR_INT1_TSH_YL				0x35
#define L3G4200D_REG_ADDR_INT1_TSH_ZH				0x36
#define L3G4200D_REG_ADDR_INT1_TSH_ZL				0x37
	#define L3G4200D_INT1_TSH_H_BN_VALUE					0
	#define L3G4200D_INT1_TSH_H_BM_VALUE					(0x7F << L3G4200D_INT1_TSH_H_BN_VALUE)
	#define L3G4200D_INT1_TSH_L_BN_VALUE					0
	#define L3G4200D_INT1_TSH_L_BM_VALUE					(0xFF << L3G4200D_INT1_TSH_L_BN_VALUE)

#define L3G4200D_REG_ADDR_INT1_DURATION				0x38
	#define L3G4200D_INT1_DURATION_BN_WAIT					7
	#define L3G4200D_INT1_DURATION_BM_WAIT					(0x01 << L3G4200D_INT1_DURATION_BN_WAIT)
	#define L3G4200D_INT1_DURATION_BN_D						0
	#define L3G4200D_INT1_DURATION_BM_D						(0x7F << L3G4200D_INT1_DURATION_BN_D)

/* Public functions */
uint16_t L3G4200D_Init(void);
uint16_t L3G4200D_GetDataRaw(int16_t *pX, int16_t *pY, int16_t *pZ);
uint16_t L3G4200D_GetData(float *pX_rads, float *pY_rads, float *pZ_rads);

#endif /* DRIVERS_L3G4200D_H_ */
